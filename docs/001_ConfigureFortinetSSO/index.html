
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/bmt.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Get Started: Configure FortiGate and IBM Security Verify - IBM Security Verify Fortinet VPN SAML Single Sign-on (SSO)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.08040f6c.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#get-started-configure-fortigate-and-ibm-security-verify" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="IBM Security Verify Fortinet VPN SAML Single Sign-on (SSO)" class="md-header__button md-logo" aria-label="IBM Security Verify Fortinet VPN SAML Single Sign-on (SSO)" data-md-component="logo">
      
  <img src="../assets/bmt.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IBM Security Verify Fortinet VPN SAML Single Sign-on (SSO)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Get Started: Configure FortiGate and IBM Security Verify
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="IBM Security Verify Fortinet VPN SAML Single Sign-on (SSO)" class="md-nav__button md-logo" aria-label="IBM Security Verify Fortinet VPN SAML Single Sign-on (SSO)" data-md-component="logo">
      
  <img src="../assets/bmt.png" alt="logo">

    </a>
    IBM Security Verify Fortinet VPN SAML Single Sign-on (SSO)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        How to configure FortiGate VPN to use IBM Security Verify SAML Single sign-on
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Get Started: Configure FortiGate and IBM Security Verify
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Get Started: Configure FortiGate and IBM Security Verify
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#section-1-create-an-application-in-ibm-security-verify" class="md-nav__link">
    Section #1: Create an application in IBM Security Verify
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-2-configure-single-sign-on-in-fortigate" class="md-nav__link">
    Section #2: Configure Single Sign-on in FortiGate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-3-configure-the-forticlient-vpn" class="md-nav__link">
    Section #3: Configure the FortiClient VPN
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../999_Disclaimer/" class="md-nav__link">
        Disclaimer
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#section-1-create-an-application-in-ibm-security-verify" class="md-nav__link">
    Section #1: Create an application in IBM Security Verify
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-2-configure-single-sign-on-in-fortigate" class="md-nav__link">
    Section #2: Configure Single Sign-on in FortiGate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-3-configure-the-forticlient-vpn" class="md-nav__link">
    Section #3: Configure the FortiClient VPN
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="get-started-configure-fortigate-and-ibm-security-verify">Get Started: Configure FortiGate and IBM Security Verify</h1>
<p>Within IBM Security Verify we’re going to create an application and set the conditional-access policies that control when users are sent a two-factor authentication challenge. If you’re using LDAP or RADIUS authentication, this will not impact your existing users. This will simply be configured as an additional authentication mechanism. </p>
<h2 id="section-1-create-an-application-in-ibm-security-verify">Section #1: Create an application in IBM Security Verify</h2>
<p>Log into the IBM Securtiy Verify Admin portal.</p>
<ol>
<li>Create a new application by going to <code>Applications</code> &gt; <code>Applications</code> then click <code>Add Application</code>. </li>
<li>Choose the first option, <code>Custom Application</code>. </li>
<li>
<p>Under the <code>Sign-on</code> tab fill out the following values:</p>
<p><strong>Provider ID:</strong>
<div class="highlight"><pre><span></span><code>https://{FQDN}:{PORT}/remote/saml/metadata/
</code></pre></div>
<strong>Assertion consumer service URL (HTTP-POST)</strong>
<div class="highlight"><pre><span></span><code>https://{FQDN}:{PORT}/remote/saml/login/
</code></pre></div>
<strong>Service provider SSO URL</strong>
<div class="highlight"><pre><span></span><code>https://{FQDN}:{PORT}/remote/saml/?acs
</code></pre></div>
<strong>NameID format</strong>: <code>Email</code></p>
<p><strong>Name identifier</strong>: <code>email</code></p>
</li>
<li>
<p>Under <strong>Attribute mappings</strong> add two additional attributes:</p>
<table>
<thead>
<tr>
<th>Attribute name</th>
<th>Attribute name format</th>
<th>Attribute source</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Groups</code></td>
<td><code>urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</code></td>
<td><code>groupIds</code></td>
</tr>
<tr>
<td><code>username</code></td>
<td><code>urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</code></td>
<td><code>email</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <strong>Save</strong> to create the application. For now, let's allow everyone to use the application. Once we're finished our proof of concept, we can restrict usage via the <strong>Entitlements</strong> page.</p>
</li>
</ol>
<h2 id="section-2-configure-single-sign-on-in-fortigate">Section #2: Configure Single Sign-on in FortiGate</h2>
<div class="admonition notes">
<p class="admonition-title">Notes</p>
<p>Consider upgrading to v7.2.3 (or higher) before proceeding. You can still set up your SSO VPN without upgrading, but you’ll need to run commands via the terminal to configure SSO. We’re going to provide terminal commands to make it easy.</p>
</div>
<ol>
<li>Log into the FortiGate appliance Dashboard.</li>
<li>Under <code>System</code> &gt; <code>Certificates</code>, upload the IBM Security Verify certificate used for the Fortinet VPN application you defined earlier. Remember the certificate name in Fortinet (likely REMOTE_Cert_2).</li>
<li>In the FortiGate terminal, configure IBM Security Verify identity SSO for Fortinet VPN:
<div class="highlight"><pre><span></span><code>config user saml
    edit &quot;fac-sslvpn&quot;
        set entity-id &quot;https://{FQDN}:{PORT}/remote/saml/metadata/&quot;
        set single-sign-on-url &quot;https:// {FQDN}:{PORT}/remote/saml/login/&quot;
        set single-logout-url &quot;https:// {FQDN}:{PORT}/remote/saml/logout/&quot;
        set idp-entity-id &quot;IBM SECURITY VERIFY/PROVIDER ID&quot;
        set idp-single-sign-on-url &quot; IBM SECURITY VERIFY/LOGIN URL&quot;
        set idp-cert &quot;REMOTE_Cert_2&quot;
        set user-name &quot;username&quot;
        set group-name &quot;Groups&quot;
        set digest-method sha1
    next
end
</code></pre></div></li>
<li>Add the SAML remote groups to your existing Fortinet user groups under <code>User &amp; Authentication</code> &gt; <code>User Groups</code> so that your SAML users have the same permissions as your RADIUS users. </li>
</ol>
<h2 id="section-3-configure-the-forticlient-vpn">Section #3: Configure the FortiClient VPN</h2>
<p>This section describes how to configure the FortiClient client for single sign-on.</p>
<ol>
<li>
<p>In the FortiClient client, create a new SSL-VPN profile and enter the following values:</p>
<table>
<thead>
<tr>
<th>Field name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Connection Name</code></td>
<td>Give the connection a meaningful name</td>
</tr>
<tr>
<td><code>Remote gateway</code></td>
<td>The public FQDN of the FortiGate firwall</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Select <code>Customized port</code> and enter the port number.</p>
</li>
<li>
<p>Select <code>Enable Single Sign-on (SSO) for VPN Tunnel</code>.</p>
</li>
<li>
<p>Select <code>Use external browser as user-agent for SAML user authentication</code> (optional).</p>
</li>
</ol>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: How to configure FortiGate VPN to use IBM Security Verify SAML Single sign-on" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              How to configure FortiGate VPN to use IBM Security Verify SAML Single sign-on
            </div>
          </div>
        </a>
      
      
        
        <a href="../999_Disclaimer/" class="md-footer__link md-footer__link--next" aria-label="Next: Disclaimer" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Disclaimer
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <small>Documentation provided by</small><br /><br /> <img src="../assets/bmt-logo-small-white.png" /> <p> PO Box 2056,<br /> Grand Cayman KY1-1105<br /> Cayman Islands<br /> <a href="https://www.bmt.ky">https://www.bmt.ky</a> </p>
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/bmtltd" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>