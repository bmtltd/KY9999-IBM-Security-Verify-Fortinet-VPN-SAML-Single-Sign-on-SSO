{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"How to configure FortiGate VPN to use IBM Security Verify SAML Single sign-on This how-to guide walks you through how to configure FortiGate VPN to use IBM Security Verify Single sign-on. Before you begin Before you begin, make sure you have the following prerequisites: FortiGate with FortiOS 6.4.0 or later FortiClient or FortiClient VPN 6.4.0 or later Access to the IBM Security Verify Admin Portal Access to the FortiGate admin console or CLI Before you configure the FortiGate SSL VPN web interface for SSO, make sure you have the following: FortiGate Fully-qualified domain: https://vpn. [your-domain-name].com You have created a FortiGate admin and users for SSO Why use SAML authentication? Our blog post coverts this in greater detail ( click here ), but just to summarise, using SAML-based authentication with your VPN is going to give you greater access to your conditional-access policies offered by your Single Sign-on provider. Simple example to get you started Remember, this is meant to be simple authentication/authorisation example just to get you started. We're assuming you have already configured things like your Fortinet SSL certificate and your access-control policies. In fact, we're assuming you already have your VPN configured using either local authentication, LDAP or RADIUS authentication. Our goal is to simply add SAML as an additional option. See mistakes/bugs in our examples? If you notice an issue with our documentation, please let us know. We want to fix everything. Just raise an issue in Github, and we'll address it.","title":"How to configure FortiGate VPN to use IBM Security Verify SAML Single sign-on"},{"location":"#how-to-configure-fortigate-vpn-to-use-ibm-security-verify-saml-single-sign-on","text":"This how-to guide walks you through how to configure FortiGate VPN to use IBM Security Verify Single sign-on.","title":"How to configure FortiGate VPN to use IBM Security Verify SAML Single sign-on"},{"location":"#before-you-begin","text":"Before you begin, make sure you have the following prerequisites: FortiGate with FortiOS 6.4.0 or later FortiClient or FortiClient VPN 6.4.0 or later Access to the IBM Security Verify Admin Portal Access to the FortiGate admin console or CLI Before you configure the FortiGate SSL VPN web interface for SSO, make sure you have the following: FortiGate Fully-qualified domain: https://vpn. [your-domain-name].com You have created a FortiGate admin and users for SSO","title":"Before you begin"},{"location":"#why-use-saml-authentication","text":"Our blog post coverts this in greater detail ( click here ), but just to summarise, using SAML-based authentication with your VPN is going to give you greater access to your conditional-access policies offered by your Single Sign-on provider.","title":"Why use SAML authentication?"},{"location":"#simple-example-to-get-you-started","text":"Remember, this is meant to be simple authentication/authorisation example just to get you started. We're assuming you have already configured things like your Fortinet SSL certificate and your access-control policies. In fact, we're assuming you already have your VPN configured using either local authentication, LDAP or RADIUS authentication. Our goal is to simply add SAML as an additional option.","title":"Simple example to get you started"},{"location":"#see-mistakesbugs-in-our-examples","text":"If you notice an issue with our documentation, please let us know. We want to fix everything. Just raise an issue in Github, and we'll address it.","title":"See mistakes/bugs in our examples?"},{"location":"001_ConfigureFortinetSSO/","text":"Get Started: Configure FortiGate and IBM Security Verify Within IBM Security Verify we\u2019re going to create an application and set the conditional-access policies that control when users are sent a two-factor authentication challenge. If you\u2019re using LDAP or RADIUS authentication, this will not impact your existing users. This will simply be configured as an additional authentication mechanism. Section #1: Create an application in IBM Security Verify Log into the IBM Securtiy Verify Admin portal. Create a new application by going to Applications > Applications then click Add Application . Choose the first option, Custom Application . Under the Sign-on tab fill out the following values: Provider ID: https://{FQDN}:{PORT}/remote/saml/metadata/ Assertion consumer service URL (HTTP-POST) https://{FQDN}:{PORT}/remote/saml/login/ Service provider SSO URL https://{FQDN}:{PORT}/remote/saml/?acs NameID format : Email Name identifier : email Under Attribute mappings add two additional attributes: Attribute name Attribute name format Attribute source Groups urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified groupIds username urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified email Click Save to create the application. For now, let's allow everyone to use the application. Once we're finished our proof of concept, we can restrict usage via the Entitlements page. Section #2: Configure Single Sign-on in FortiGate Notes Consider upgrading to v7.2.3 (or higher) before proceeding. You can still set up your SSO VPN without upgrading, but you\u2019ll need to run commands via the terminal to configure SSO. We\u2019re going to provide terminal commands to make it easy. Log into the FortiGate appliance Dashboard. Under System > Certificates , upload the IBM Security Verify certificate used for the Fortinet VPN application you defined earlier. Remember the certificate name in Fortinet (likely REMOTE_Cert_2). In the FortiGate terminal, configure IBM Security Verify identity SSO for Fortinet VPN: config user saml edit \"fac-sslvpn\" set entity-id \"https://{FQDN}:{PORT}/remote/saml/metadata/\" set single-sign-on-url \"https:// {FQDN}:{PORT}/remote/saml/login/\" set single-logout-url \"https:// {FQDN}:{PORT}/remote/saml/logout/\" set idp-entity-id \"IBM SECURITY VERIFY/PROVIDER ID\" set idp-single-sign-on-url \" IBM SECURITY VERIFY/LOGIN URL\" set idp-cert \"REMOTE_Cert_2\" set user-name \"username\" set group-name \"Groups\" set digest-method sha1 next end Add the SAML remote groups to your existing Fortinet user groups under User & Authentication > User Groups so that your SAML users have the same permissions as your RADIUS users. Section #3: Configure the FortiClient VPN This section describes how to configure the FortiClient client for single sign-on. In the FortiClient client, create a new SSL-VPN profile and enter the following values: Field name Description Connection Name Give the connection a meaningful name Remote gateway The public FQDN of the FortiGate firwall Select Customized port and enter the port number. Select Enable Single Sign-on (SSO) for VPN Tunnel . Select Use external browser as user-agent for SAML user authentication (optional).","title":"Get Started: Configure FortiGate and IBM Security Verify"},{"location":"001_ConfigureFortinetSSO/#get-started-configure-fortigate-and-ibm-security-verify","text":"Within IBM Security Verify we\u2019re going to create an application and set the conditional-access policies that control when users are sent a two-factor authentication challenge. If you\u2019re using LDAP or RADIUS authentication, this will not impact your existing users. This will simply be configured as an additional authentication mechanism.","title":"Get Started: Configure FortiGate and IBM Security Verify"},{"location":"001_ConfigureFortinetSSO/#section-1-create-an-application-in-ibm-security-verify","text":"Log into the IBM Securtiy Verify Admin portal. Create a new application by going to Applications > Applications then click Add Application . Choose the first option, Custom Application . Under the Sign-on tab fill out the following values: Provider ID: https://{FQDN}:{PORT}/remote/saml/metadata/ Assertion consumer service URL (HTTP-POST) https://{FQDN}:{PORT}/remote/saml/login/ Service provider SSO URL https://{FQDN}:{PORT}/remote/saml/?acs NameID format : Email Name identifier : email Under Attribute mappings add two additional attributes: Attribute name Attribute name format Attribute source Groups urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified groupIds username urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified email Click Save to create the application. For now, let's allow everyone to use the application. Once we're finished our proof of concept, we can restrict usage via the Entitlements page.","title":"Section #1: Create an application in IBM Security Verify"},{"location":"001_ConfigureFortinetSSO/#section-2-configure-single-sign-on-in-fortigate","text":"Notes Consider upgrading to v7.2.3 (or higher) before proceeding. You can still set up your SSO VPN without upgrading, but you\u2019ll need to run commands via the terminal to configure SSO. We\u2019re going to provide terminal commands to make it easy. Log into the FortiGate appliance Dashboard. Under System > Certificates , upload the IBM Security Verify certificate used for the Fortinet VPN application you defined earlier. Remember the certificate name in Fortinet (likely REMOTE_Cert_2). In the FortiGate terminal, configure IBM Security Verify identity SSO for Fortinet VPN: config user saml edit \"fac-sslvpn\" set entity-id \"https://{FQDN}:{PORT}/remote/saml/metadata/\" set single-sign-on-url \"https:// {FQDN}:{PORT}/remote/saml/login/\" set single-logout-url \"https:// {FQDN}:{PORT}/remote/saml/logout/\" set idp-entity-id \"IBM SECURITY VERIFY/PROVIDER ID\" set idp-single-sign-on-url \" IBM SECURITY VERIFY/LOGIN URL\" set idp-cert \"REMOTE_Cert_2\" set user-name \"username\" set group-name \"Groups\" set digest-method sha1 next end Add the SAML remote groups to your existing Fortinet user groups under User & Authentication > User Groups so that your SAML users have the same permissions as your RADIUS users.","title":"Section #2: Configure Single Sign-on in FortiGate"},{"location":"001_ConfigureFortinetSSO/#section-3-configure-the-forticlient-vpn","text":"This section describes how to configure the FortiClient client for single sign-on. In the FortiClient client, create a new SSL-VPN profile and enter the following values: Field name Description Connection Name Give the connection a meaningful name Remote gateway The public FQDN of the FortiGate firwall Select Customized port and enter the port number. Select Enable Single Sign-on (SSO) for VPN Tunnel . Select Use external browser as user-agent for SAML user authentication (optional).","title":"Section #3: Configure the FortiClient VPN"},{"location":"999_Disclaimer/","text":"Disclaimer The material embodied in this repository is provided to you \"as-is\" and without warranty of any kind, express, implied or otherwise, including without limitation, any warranty of fitness for a particular purpose. In no event shall BMT LTD be liable to you or anyone else for any direct, special, incidental, indirect or consequential damages of any kind, or any damages whatsoever, including without limitation, loss of profit, loss of use, savings or revenue, or the claims of third parties, whether or not BMT LTD has been advised of the possibility of such loss, however caused and on any theory of liability, arising out of or in connection with the possession, use or performance of any contents of this repository.","title":"Disclaimer"},{"location":"999_Disclaimer/#disclaimer","text":"The material embodied in this repository is provided to you \"as-is\" and without warranty of any kind, express, implied or otherwise, including without limitation, any warranty of fitness for a particular purpose. In no event shall BMT LTD be liable to you or anyone else for any direct, special, incidental, indirect or consequential damages of any kind, or any damages whatsoever, including without limitation, loss of profit, loss of use, savings or revenue, or the claims of third parties, whether or not BMT LTD has been advised of the possibility of such loss, however caused and on any theory of liability, arising out of or in connection with the possession, use or performance of any contents of this repository.","title":"Disclaimer"}]}